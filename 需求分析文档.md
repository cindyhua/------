# 食物营养扫描助手 - iOS应用MVP需求设计文档（修订版）

## 1. 项目概述

### 项目背景和目标
本项目旨在开发一款iOS应用，通过拍照识别食品包装上的营养成分表和配料表，并将其与中国营养推荐每日膳食标准进行对比，为用户提供清晰的营养摄入信息。随着人们健康意识的提高，对食品营养成分的关注度不断增加，但普通消费者往往难以理解包装上的营养数据，也难以将其与日常饮食需求联系起来。[1]

### 业务价值和预期成果
- 帮助用户快速了解食品的营养价值，促进健康饮食决策
- 提高用户对每日营养摄入的意识，减少不健康食品的消费
- 为有特殊饮食需求的用户(如糖尿病患者、减重人群)提供便捷的营养参考工具
- 通过精美分享图片功能增强社交传播，提高应用曝光度
- 预期用户留存率达到30%，月活跃用户目标为10万人 [2]

### 项目时间线和里程碑
- 第1-2周：需求确认和设计规范制定
- 第3-6周：核心功能开发(图像识别、数据解析、食品PK功能)
- 第7-8周：用户界面开发和基础功能集成
- 第9-10周：内部测试和问题修复
- 第11-12周：封闭测试和用户反馈收集
- 第13周：应用商店发布

## 2. 用户画像

### 目标用户的详细描述
- **健康生活追求者**：25-45岁，注重健康饮食，但缺乏专业营养知识，希望通过科技手段辅助健康决策
- **特殊饮食需求人群**：有特定健康状况(如高血压、糖尿病)或饮食限制(如低碳水、高蛋白)的用户，需要严格监控食品成分
- **忙碌的职场人士**：时间有限，希望快速了解食品营养信息，做出更健康的饮食选择
- **健身爱好者**：需要精确追踪营养摄入，经常比较不同食品的营养价值
- **社交媒体活跃用户**：喜欢分享生活方式和健康选择的用户，会利用分享图片功能展示自己的饮食习惯 [3]

### 用户行为模式和使用场景
- **购物场景**：在超市购物时，通过应用快速扫描食品包装，判断是否符合个人营养需求
- **比较选择场景**：在选购同类食品时，使用PK功能对比两种产品的营养价值
- **餐前规划**：在准备饭菜前，扫描食材包装，了解营养成分，合理安排一日三餐的营养分配
- **社交分享场景**：用户扫描识别后，生成精美的营养分析图片分享到社交媒体
- **健康记录**：定期记录和分析个人食品消费模式，调整饮食习惯 [4]

## 3. 功能需求

### 核心功能详细描述

#### 图像识别与数据提取模块
- **包装扫描功能**
  - 支持通过相机实时拍摄食品包装
  - 支持从相册选择已有图片
  - 自动识别图像中的营养成分表和配料表区域
  - 提供手动调整识别区域的功能

- **文字识别与解析**
  - 将图像中的文字转换为可处理的数字和文本数据
  - 识别常见营养素数据(热量、蛋白质、脂肪、碳水化合物、糖、钠等)
  - 解析配料表中的原料列表
  - 支持简体中文和英文两种语言的营养标签识别 [1]

#### 食品封面与记录管理
- **食品封面拍摄**
  - 在完成营养成分扫描后，提示用户拍摄食品封面照片
  - 支持从相册选择已有图片作为封面
  - 提供简单的图片编辑功能(裁剪、滤镜、亮度调整)
  - 自动关联封面照片与营养数据

- **记录保存与管理**
  - 自动保存扫描结果和封面照片
  - 支持添加食品名称、品牌、分类等标签
  - 记录扫描时间和位置信息(可选)
  - 提供编辑和删除已保存记录的功能 [2]

#### 营养分析模块
- **营养数据对比**
  - 将识别到的营养数据与中国居民膳食指南(2022)推荐标准进行对比
  - 显示各营养素占每日推荐摄入量的百分比
  - 根据用户个人信息(性别、年龄、体重)调整推荐值

- **营养评分系统**
  - 为食品提供综合营养评分(A-E五级)
  - 基于热量密度、营养素密度、添加糖含量等因素计算评分
  - 提供简明的营养优缺点分析 [3]

#### 食品PK功能
- **双食品对比分析**
  - 允许用户同时选择两种已扫描的食品进行对比
  - 支持从历史记录或新扫描的食品中选择对比对象
  - 提供分屏视图，直观展示两种食品的营养差异
  
- **对比维度设置**
  - 支持用户自定义对比的营养维度(如热量、蛋白质、脂肪等)
  - 提供预设的对比模板(减脂对比、增肌对比、低糖对比等)
  - 突出显示关键差异点和优势项

- **对比结果分析**
  - 生成综合对比评分和推荐建议
  - 针对用户的健康目标提供选择建议
  - 支持将对比结果保存或分享 [4]

#### 分享图片生成功能
- **精美图片模板**
  - 提供多种设计精美的分享图片模板
  - 不同场景的模板(健康提示、营养对比、每日记录等)
  - 季节性和节日主题模板

- **图片内容定制**
  - 自动整合食品封面、营养数据和评分
  - 支持添加个人评价和标签
  - 可选择突出显示特定营养素或健康提示
  - 支持添加个性化水印或用户头像

- **分享功能**
  - 一键分享到主流社交媒体平台(微信、微博、小红书等)
  - 支持保存高清图片到相册
  - 提供分享文案模板和推荐标签 [1]

#### 用户个性化模块
- **个人档案设置**
  - 基本信息(性别、年龄、身高、体重)
  - 活动水平(久坐、轻度活动、中度活动、重度活动)
  - 特殊饮食需求(素食、无麸质、低糖等)
  - 健康目标(减重、增肌、健康维持)

- **营养目标设定**
  - 基于个人信息自动计算每日营养需求
  - 允许用户自定义营养素目标
  - 设置特定营养素的警示阈值(如钠、糖、反式脂肪) [2]

#### 数据管理模块
- **历史记录**
  - 保存已扫描食品的历史记录
  - 按日期、食品类别、营养评分等方式筛选记录
  - 支持添加个人备注和标签

- **食品数据库**
  - 本地存储常见食品的营养信息
  - 定期从云端更新食品数据库
  - 支持用户手动添加未收录的食品信息 [3]

### 功能优先级排序
1. 图像识别与营养成分提取(P0)
2. 食品封面拍摄与记录保存(P0)
3. 营养数据对比与分析(P0)
4. 食品PK功能(P0)
5. 分享图片生成功能(P0)
6. 用户个人档案设置(P1)
7. 历史记录管理(P1)
8. 食品数据库(P2)
9. 营养评分系统(P2)

### 用户故事(User Stories)
1. **购物决策场景**：作为一位注重健康的消费者，我想在超市购物时扫描两种类似食品的包装并进行PK对比，以便选择更符合我健康需求的产品。

2. **社交分享场景**：作为一位健康生活博主，我想扫描识别我购买的健康食品，拍摄精美的产品封面，并生成营养分析分享图，发布到我的社交媒体账号上。

3. **饮食控制场景**：作为一位糖尿病患者，我需要严格控制糖分摄入，我想通过应用扫描食品包装，立即知道这个食品的糖含量是否超过我的每日限额，并保存记录以便追踪。

4. **营养对比场景**：作为一位健身爱好者，我想对比两种蛋白棒的营养成分，特别是蛋白质含量和糖分含量，以选择更适合我健身需求的产品。[4]

## 4. 非功能需求

### 性能要求
- 图像识别处理时间不超过3秒(在iPhone 11或更新设备上)
- 应用启动时间不超过2秒
- 分享图片生成时间不超过5秒
- 本地数据库查询响应时间不超过1秒
- 应用大小不超过100MB(不含离线数据库) [1]

### 安全性要求
- 用户个人数据(如身体数据、饮食记录)进行本地加密存储
- 网络传输采用HTTPS协议
- 明确的隐私政策，详细说明数据收集和使用方式
- 提供数据导出和删除功能，符合数据保护法规 [2]

### 可用性和易用性要求
- 简洁直观的用户界面，符合iOS设计规范
- 首次使用引导流程，帮助用户快速上手
- 支持深色模式和动态字体大小
- 关键功能(如扫描、PK对比、分享)可在不超过3步操作内完成
- 提供无障碍功能支持，如VoiceOver兼容 [3]

### 兼容性要求
- 支持iOS 14.0及以上版本
- 优化适配iPhone 11及以上机型
- 支持iPad设备(非必须，但界面需适配)
- 支持中文和英文界面 [4]

## 5. 用户界面要求

### 界面设计指南
- 遵循iOS Human Interface Guidelines
- 使用系统原生控件，确保一致的用户体验
- 色彩方案：主色调使用健康绿(#4CAF50)，辅助色使用橙色(#FF9800)和蓝色(#2196F3)
- 字体：系统默认San Francisco字体，确保良好的可读性
- 图标风格：简约线条风格，保持视觉一致性 [1]

### 交互流程图
1. **核心扫描流程**
   - 启动应用 → 主页面 → 点击扫描按钮 → 相机界面 → 拍摄/选择图片 → 确认识别区域 → 显示识别结果 → 拍摄食品封面 → 保存/分享结果

2. **PK对比流程**
   - 主页面 → PK按钮 → 选择第一个食品(从历史或新扫描) → 选择第二个食品 → 设置对比维度 → 查看对比结果 → 保存/分享对比

3. **分享图片生成流程**
   - 食品详情页 → 点击分享按钮 → 选择分享模板 → 预览生成的分享图 → 可选编辑 → 保存/分享到社交媒体

4. **用户设置流程**
   - 主页面 → 设置 → 个人信息 → 填写基本信息 → 设置饮食偏好 → 保存 [2]

### 原型图或线框图
- **主页面**：底部导航栏(扫描、历史、PK、我的)，中央大型扫描按钮，上方快速访问最近记录
- **扫描界面**：相机取景框，闪光灯开关，相册选择按钮，拍摄按钮
- **封面拍摄界面**：相机取景框，提示文字，拍摄按钮，跳过选项
- **结果界面**：食品封面图片，营养成分表格，营养评分，每日推荐对比图表，PK按钮，分享按钮
- **PK对比界面**：左右分屏布局，两侧显示食品图片和关键营养数据，中间显示对比结果和建议
- **分享模板选择界面**：网格布局展示多种分享模板预览，顶部可切换模板类别
- **个人中心**：用户信息摘要，设置入口，数据统计概览，健康目标进度 [3]

## 6. 技术规格

### 系统架构
- **前端**：Swift UI + UIKit混合架构
- **本地存储**：Core Data + SQLite
- **图像处理**：Vision框架 + Core ML
- **图片生成**：Core Graphics + Core Image
- **网络层**：URLSession + Combine框架
- **依赖注入**：采用工厂模式和服务定位器模式 [4]

### API需求
- **营养数据API**：获取食品数据库更新，提交未识别食品
- **用户账户API**：可选的云同步功能，用户数据备份与恢复
- **图像识别增强API**：当本地识别不准确时，调用云端OCR服务提高准确率
- **分享模板API**：获取最新分享图片模板和主题 [1]

### 数据模型
- **用户模型**：个人信息、健康目标、饮食偏好
- **食品模型**：名称、品牌、封面图片、营养成分、配料表、用户评分、标签
- **记录模型**：扫描时间、食品信息、封面图片、用户备注、消费量
- **对比记录模型**：对比时间、两种食品ID、对比维度设置、结果摘要
- **分享模板模型**：模板ID、预览图、主题类别、适用场景
- **营养目标模型**：各营养素每日目标值、警戒阈值 [2]

### 第三方集成需求
- **OCR引擎**：考虑集成百度OCR或Google ML Kit提高文字识别准确率
- **食品数据库**：中国食品成分数据库API
- **分享功能**：系统原生分享功能，支持微信、微博等平台
- **图片编辑**：考虑集成轻量级图片编辑库，提供基础图片处理功能
- **分析工具**：Firebase Analytics或友盟统计，跟踪用户行为和应用性能 [3]

## 7. 验收标准

### 明确的成功指标
- 营养成分识别准确率达到85%以上
- 配料表识别准确率达到80%以上
- 分享图片生成功能用户满意度达到90%以上
- PK功能使用率达到每活跃用户每周至少1次
- 应用崩溃率低于1%
- 用户平均会话时长达到3分钟以上
- 首周留存率达到40%以上 [4]

### 测试用例和场景
1. **识别测试**：使用20种不同类型食品包装(不同光线条件、角度、包装材质)测试识别准确性
2. **封面拍摄测试**：在不同光线条件下测试封面拍摄功能的效果
3. **PK对比测试**：测试不同类型食品的对比功能，验证数据计算准确性和界面展示
4. **分享图片测试**：测试所有分享模板的生成效果，验证在不同设备上的显示效果
5. **性能测试**：在不同设备上测试应用启动时间、识别响应时间、图片生成时间、内存占用
6. **用户流程测试**：验证所有核心用户流程的完整性和流畅性
7. **边界情况测试**：模糊不清的包装、非标准格式的营养表、多语言混合的包装 [1]

### QA测试计划
- **单元测试**：核心算法和业务逻辑的单元测试覆盖率>80%
- **UI测试**：关键界面和交互流程的自动化UI测试
- **用户验收测试**：招募10-15名目标用户进行实际场景测试
- **兼容性测试**：在不同iOS版本和设备型号上进行测试
- **安全测试**：数据存储和传输安全性验证 [2]

## 8. 风险评估

### 潜在风险识别
1. **技术风险**：OCR识别准确率不足，特别是对于复杂背景或低质量图像
2. **用户体验风险**：用户可能因为操作复杂或结果不准确而放弃使用
3. **数据风险**：食品数据库不完整，导致部分食品无法提供准确分析
4. **性能风险**：分享图片生成功能可能在低端设备上性能不佳
5. **市场风险**：同类竞品功能更新迭代快，差异化不足
6. **合规风险**：营养建议可能涉及健康咨询边界，需注意法律风险 [3]

### 风险缓解策略
1. **技术风险缓解**：
   - 结合本地和云端OCR技术提高识别准确率
   - 提供手动调整和编辑识别结果的功能
   - 建立用户反馈机制，持续改进识别算法

2. **用户体验风险缓解**：
   - 简化核心流程，减少操作步骤
   - 提供清晰的使用引导和帮助信息
   - 早期进行用户测试，收集反馈并优化

3. **性能风险缓解**：
   - 优化图片生成算法，减少资源占用
   - 针对低端设备提供简化版分享模板
   - 实施渐进式加载策略，优先展示核心内容

4. **数据风险缓解**：
   - 建立用户贡献机制，允许用户提交未收录的食品信息
   - 与食品数据提供商合作，定期更新数据库
   - 明确标示数据来源和可能的不准确性 [4]

## 9. 版本规划

### MVP后的迭代计划
- **V1.1**：增强分享图片功能，提供更多模板和自定义选项
- **V1.2**：完善食品PK功能，增加多维度对比和推荐算法
- **V1.3**：添加膳食规划功能，基于扫描结果推荐一日三餐
- **V2.0**：增加AI营养师功能，提供个性化饮食建议 [1]

### 未来功能路线图
- **食品条形码扫描**：通过条形码快速识别已收录食品
- **多食品组合分析**：分析多种食品组合后的综合营养价值
- **餐厅菜单识别**：扩展到餐厅菜单的营养估算
- **多人家庭账户**：支持家庭成员共享和管理饮食记录
- **健康设备集成**：与Apple Health等健康平台数据同步
- **AR营养可视化**：使用AR技术直观展示食品营养成分
- **社区功能**：用户可分享和评论食品，形成健康饮食社区 [2]

## 10. 附录

### 术语表
- **DRIs**：膳食营养素参考摄入量(Dietary Reference Intakes)
- **NRV**：营养素参考值(Nutrient Reference Values)
- **OCR**：光学字符识别(Optical Character Recognition)
- **BMR**：基础代谢率(Basal Metabolic Rate)
- **PAL**：身体活动水平(Physical Activity Level)
- **PK**：产品对比(Product Komparison，使用K是为了品牌命名考虑) [3]

### 参考资料
1. 中国居民膳食指南(2022)
2. 中国居民平衡膳食宝塔(2022)
3. 中国食品成分表(第6版)
4. iOS Human Interface Guidelines
5. 食品安全国家标准 预包装食品营养标签通则(GB 28050-2011) [4]

### 相关文档链接
- 产品原型设计文档：[链接待添加]
- 技术架构详细设计：[链接待添加]
- 市场调研报告：[链接待添加]
- 用户研究报告：[链接待添加]
- 分享模板设计规范：[链接待添加]
- PK功能算法说明：[链接待添加]

---

引用来源:
[1]: 中国居民平衡膳食宝塔（2022）修订和解析
[2]: 中国居民膳食指南
[3]: 成人肥胖食养指南（2024 年版）
[4]: 中国居民膳食指南（2022）平衡膳食八准则（文字版）

### 相关文档链接
- [中国营养学会DRIs数据库](https://www.cnsoc.org/)  

### 竞品
- [成分查查](https://apps.apple.com/cn/app/%E6%88%90%E5%88%86%E6%9F%A5%E6%9F%A5/id6743526964)
- 
---

引用来源:
[1]: 中国居民平衡膳食宝塔（2022）修订和解析
[2]: 中国居民膳食指南
[3]: 成人肥胖食养指南（2024 年版）
[4]: 中国居民膳食指南（2022）平衡膳食八准则（文字版）